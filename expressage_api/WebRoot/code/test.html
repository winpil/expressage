<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title></title>
		<link rel="stylesheet"href="css/header.css" />
		<link rel="stylesheet"href="css/kuaidi.css" />
		<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		<script src="js/zsy.js" type="text/javascript" charset="utf-8"></script>
		<script src="/expressage_api/express/js/jquery.js" ></script>
	</head>
	
	<body>
	</body>
	   <script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
	<script>    
		/*    
		* 注意：    
		* 1. 所有的JS接口只能在公众号绑定的域名下调用，公众号开发者需要先登录微信公众平台进入“公众号设置”的“功能设置”里填写“JS接口安全域名”。    
		* 2. 如果发现在 Android 不能分享自定义内容，请到官网下载最新的包覆盖安装，Android 自定义分享接口需升级至 6.0.2.58 版本及以上。    
		* 3. 完整 JS-SDK 文档地址：http://mp.weixin.qq.com/wiki/7/aaa137b55fb2e0456bf8dd9148dd613f.html    
		*    
		* 如有问题请通过以下渠道反馈：    
		* 邮箱地址：weixin-open@qq.com    
		* 邮件主题：【微信JS-SDK反馈】具体问题    
		* 邮件内容说明：用简明的语言描述问题所在，并交代清楚遇到该问题的场景，可附上截屏图片，微信团队会尽快处理你的反馈。    
		*/    
			alert("1111");
			$.ajax( {
				url : "/expressage_api/rbac/sys/expressageUser/wxConfig",
				data : "type=2",
				type : "post",
				dataType : "json",
				success : function(data) {
					if(data.code=='000000'){
						alert("2222");
						wx.config({    
							debug: false,    
							appId: data.response.appId,    
							timestamp: data.response.timestamp,    
							nonceStr: data.response.noncestr,    
							signature: data.response.sign,    
							jsApiList: [    
								'checkJsApi',   
								'getLocation'
							]    
						}); 
					}
				},error : function() {	
					alert("错误");
				}
			});
			alert("33333");
		   
		wx.ready(function(){
			wx.getLocation({
			    success: function (res) {
			        var latitude = res.latitude; // 纬度，浮点数，范围为90 ~ -90
			        var longitude = res.longitude; // 经度，浮点数，范围为180 ~ -180。
			        var speed = res.speed; // 速度，以米/每秒计
			        var accuracy = res.accuracy; // 位置精度
			        alert(latitude);
			        alert(longitude);
			    },
			    cancel: function (res) {
			        alert('用户拒绝授权获取地理位置');
			    }
			});
		
		});
	</script>    
</html>
